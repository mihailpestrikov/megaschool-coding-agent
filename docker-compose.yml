version: "3.8"

services:
  agent:
    build: .
    environment:
      - GITHUB_APP_ID=${GITHUB_APP_ID}
      - GITHUB_PRIVATE_KEY=${GITHUB_PRIVATE_KEY}
      - GITHUB_WEBHOOK_SECRET=${GITHUB_WEBHOOK_SECRET}
      - GEMINI_API_KEY=${GEMINI_API_KEY}
    ports:
      - "8000:8000"

  ngrok:
    image: ngrok/ngrok:latest
    command: http agent:8000
    environment:
      - NGROK_AUTHTOKEN=${NGROK_AUTHTOKEN}
    ports:
      - "4040:4040"
    depends_on:
      - agent
